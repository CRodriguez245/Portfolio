<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projects - Carlos Rodriguez</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@500;700&family=Nuosu+SIL&display=swap" rel="stylesheet">
    <script src="enhanced-ai-sidekick.js"></script>
    <style>
        @font-face {
            font-family: 'Helvetica Neue';
            src: url('fonts/HelveticaNeue-Light.woff2') format('woff2');
            font-weight: 300;
        }
        @font-face {
            font-family: 'Helvetica Neue';
            src: url('fonts/HelveticaNeue-Medium.woff2') format('woff2');
            font-weight: 500;
        }
        @font-face {
            font-family: 'Helvetica Neue';
            src: url('fonts/HelveticaNeue-Bold.woff2') format('woff2');
            font-weight: 700;
        }
        .font-helvetica {
            font-family: 'Helvetica Neue', sans-serif;
        }
        .font-nuosu {
            font-family: 'Nuosu SIL', serif;
        }
        /* Cursor styles */
        * {
            cursor: none;
        }
        /* Custom cursor */
        .cursor {
            width: 12px;
            height: 12px;
            background-color: #5E5E5E;
            border-radius: 50%;
            position: fixed;
            pointer-events: none;
            z-index: 99999;
            transition: transform 0.2s ease, background-color 0.3s ease;
        }

        .cursor.hover {
            transform: scale(1.5);
        }

        .cursor.navigating {
            background-color: #18A000;
            transform: scale(1.5);
        }
        input, textarea {
            cursor: text;
        }
        a, button {
            cursor: none;
        }
        .contact-dropdown {
            cursor: none;
        }
        .contact-dropdown:hover {
            cursor: none;
        }
        .contact-dropdown + div a {
            cursor: none;
        }
        .nav-link {
            position: relative;
            text-decoration: none;
        }
        .nav-link::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 1px;
            bottom: -4px;
            left: 0;
            background-color: #000000;
            transform: scaleX(0);
            transform-origin: bottom right;
            transition: transform 0.3s ease;
        }
        .nav-link:hover::after {
            transform: scaleX(1);
            transform-origin: bottom left;
        }
        .nav-link.active::after {
            transform: scaleX(1);
        }
        .tab-button {
            position: relative;
            transition: all 0.3s ease;
            color: #6B7280;
        }
        .tab-button.active {
            color: #000000;
        }
        .tab-button:hover {
            color: #000000;
        }
        .tab-button::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 0;
            width: 100%;
            height: 2px;
            background-color: #000000;
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 0.3s ease;
        }
        .tab-button:hover::after {
            transform: scaleX(1);
        }
        .tab-button.active::after {
            transform: scaleX(1);
            animation: rollingLine 0.6s ease-out;
        }
        @keyframes rollingLine {
            0% {
                transform: scaleX(0);
                transform-origin: left;
            }
            100% {
                transform: scaleX(1);
                transform-origin: left;
            }
        }
        
        /* Vertical rolling line animation for project cards */
        .project-card {
            position: relative;
        }
        
        .project-card::before {
            content: '';
            position: absolute;
            left: -20px;
            top: 0;
            width: 4px;
            height: 100%;
            background-color: #000000;
            transform: scaleY(0);
            transform-origin: top;
            transition: transform 0.6s ease-out;
        }
        
        .project-card:hover::before {
            transform: scaleY(1);
            transform-origin: top;
        }
        


    </style>
</head>
<body class="bg-white">
    <!-- Custom cursor -->
    <div class="cursor" id="cursor"></div>

    <!-- Main Content Area (75% width) -->
    <div class="w-3/4 overflow-x-hidden">
        <!-- Navigation -->
        <nav class="fixed w-3/4 z-50">
            <div class="bg-white/80 backdrop-blur-lg px-12 py-6">
                <div class="flex justify-between items-center">
                    <h1 class="text-[28px] font-nuosu">Carlos Rodriguez</h1>
                    <div class="hidden md:flex space-x-12">
                        <a href="index.html" class="text-[16px] font-helvetica font-light nav-link relative">Home</a>
                        <a href="projects.html" class="text-[16px] font-helvetica font-light nav-link active relative">Projects</a>
                        <a href="https://docs.google.com/document/d/1RXj2iDbQUYEA5Zh2meN2EXdoaU2CWZfN_qSqDnq9CNY/edit?tab=t.0" target="_blank" class="text-[16px] font-helvetica font-light nav-link relative">Resume</a>
                        <a href="about.html" class="text-[16px] font-helvetica font-light nav-link relative">About</a>
                        <div class="relative group">
                            <button class="text-[16px] font-helvetica font-light nav-link relative contact-dropdown">Contact</button>
                            <div class="absolute top-full right-0 mt-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible contact-dropdown-menu transition-all duration-200 z-[9999]">
                                <div class="relative pr-4">
                                    <div class="bg-white/80 backdrop-blur-sm rounded-sm px-3 py-2">
                                        <div class="space-y-2 text-right">
                                            <p class="text-[14px] font-helvetica font-bold text-black whitespace-nowrap">Let's build something thoughtful.</p>
                                            <div class="space-y-1">
                                                <a href="mailto:c.a.rodriguez1999@gmail.com" class="block text-[14px] font-helvetica font-light hover:text-[#18a000] transition-colors">c.a.rodriguez1999@gmail.com</a>
                                                <a href="https://linkedin.com" target="_blank" class="block text-[14px] font-helvetica font-light hover:text-[#18a000] transition-colors">LinkedIn</a>
                                                <a href="https://github.com" target="_blank" class="block text-[14px] font-helvetica font-light hover:text-[#18a000] transition-colors">GitHub</a>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="absolute top-0 right-0 w-0.5 bg-black h-0 group-hover:h-full transition-all duration-500 ease-out"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Content Section -->
        <div class="max-w-[960px] mx-auto pt-24" style="padding-left: 48px; padding-right: 48px;">
            <!-- Hero Text -->
            <div class="mb-32">
                <h2 class="text-[32px] font-helvetica font-medium">Explore my work further.</h2>
            </div>

            <!-- Tab Navigation -->
            <div class="flex space-x-8 mb-12">
                <button class="tab-button active text-[36px] font-nuosu" onclick="switchTab('projects')">Projects</button>
                <button class="tab-button text-[36px] font-nuosu" onclick="switchTab('side-projects')">Side Projects</button>
            </div>

            <!-- Projects Section -->
            <section id="projects-tab" class="tab-content">
                
                <!-- Project Grid -->
                <div>
                    <!-- AI Research Workbook -->
                    <a href="ai-research-workbook.html" class="block mb-10 group project-card">
                        <div class="flex justify-between items-start gap-[120px]">
                            <div class="w-[420px]">
                                <h3 class="text-[20px] font-helvetica font-bold mb-1 whitespace-nowrap">AI Research Workbook</h3>
                                <p class="text-[14px] font-helvetica font-light mb-8">Product Manager, Northwestern Medicine</p>
                                <p class="text-[14px] font-helvetica font-light leading-relaxed">Built a GPT-supported research tool to help students scale inquiry and critical thinking at Northwestern Medicine.</p>
                            </div>
                            <div class="w-[500px] h-[280px] transition-all duration-300 ease-out group-hover:scale-[1.05] group-hover:shadow-2xl">
                                <img src="images/BeyondChat.webp" alt="AI Research Workbook" class="w-full h-full object-cover">
                            </div>
                        </div>
                    </a>

                    <!-- NM Scholars -->
                    <a href="nm-scholars-program.html" class="block mb-10 group project-card">
                        <div class="flex justify-between items-start gap-[120px]">
                            <div class="w-[420px]">
                                <h3 class="text-[20px] font-helvetica font-bold mb-1 whitespace-nowrap">NM Scholars Program</h3>
                                <p class="text-[14px] font-helvetica font-light mb-8">Design Strategist, Northwestern Medicine</p>
                                <p class="text-[14px] font-helvetica font-light leading-relaxed">Redesigned a clinical learning experience for high school students. Integrated systems mapping, ethnographic insights, and stakeholder alignment.</p>
                            </div>
                            <div class="w-[500px] h-[280px] transition-all duration-300 ease-out group-hover:scale-[1.05] group-hover:shadow-2xl">
                                <img src="images/NM-Scholars-ProjectsCard.jpg" alt="NM Scholars Program" class="w-full h-full object-cover">
                            </div>
                        </div>
                    </a>

                    <!-- Bachelors in Microsoft Health -->
                    <a href="bachelors-microsoft-health.html" class="block mb-10 group project-card">
                        <div class="flex justify-between items-start gap-[120px]">
                            <div class="w-[420px]">
                                <h3 class="text-[20px] font-helvetica font-bold mb-1 whitespace-nowrap">Bachelors in Microsoft Health</h3>
                                <p class="text-[14px] font-helvetica font-light mb-8">Program Manager, Microsoft Corporation</p>
                                <p class="text-[14px] font-helvetica font-light leading-relaxed">A systems-led academic program exploring healthcare through product strategy, equity, and emerging technology.</p>
                            </div>
                            <div class="w-[500px] h-[280px] transition-all duration-300 ease-out group-hover:scale-[1.05] group-hover:shadow-2xl">
                                <img src="images/BMH-ProjectCard.jpg" alt="Bachelors in Microsoft Health" class="w-full h-full object-cover">
                            </div>
                        </div>
                    </a>
                </div>
            </section>

            <!-- Side Projects Section -->
            <section id="side-projects-tab" class="tab-content hidden">
                <div>
                    <!-- Better Problems -->
                    <a href="better-problems-project.html" class="block mb-10 group project-card">
                        <div class="flex justify-between items-start gap-[120px]">
                            <div class="w-[420px]">
                                <h3 class="text-[20px] font-helvetica font-bold mb-1 whitespace-nowrap">Better Problems</h3>
                                <p class="text-[14px] font-helvetica font-light mb-8">Co-founder</p>
                                <p class="text-[14px] font-helvetica font-light leading-relaxed">A platform exploring the power of reframing everyday challenges through design thinking and creative problem-solving.</p>
                            </div>
                            <div class="w-[500px] h-[280px] transition-all duration-300 ease-out group-hover:scale-[1.05] group-hover:shadow-2xl">
                                <img src="images/BP-Card2.jpg" alt="Better Problems" class="w-full h-full object-cover">
                            </div>
                        </div>
                    </a>

                    <!-- EPICAC -->
                    <a href="epicac.html" class="block mb-10 group project-card">
                        <div class="flex justify-between items-start gap-[120px]">
                            <div class="w-[420px]">
                                <h3 class="text-[20px] font-helvetica font-bold mb-1 whitespace-nowrap">EPICAC</h3>
                                <p class="text-[14px] font-helvetica font-light mb-8">Interaction Designer & HCI Researcher</p>
                                <p class="text-[14px] font-helvetica font-light leading-relaxed">Strategic design consultancy focused on creating meaningful experiences and innovative solutions for complex challenges.</p>
                            </div>
                            <div class="w-[500px] h-[280px] transition-all duration-300 ease-out group-hover:scale-[1.05] group-hover:shadow-2xl">
                                <img src="images/epson2.webp" alt="EPICAC" class="w-full h-full object-cover">
                            </div>
                        </div>
                    </a>

                    <!-- GA.V.NO -->
                    <a href="gavno.html" class="block mb-10 group project-card">
                        <div class="flex justify-between items-start gap-[120px]">
                            <div class="w-[420px]">
                                <h3 class="text-[20px] font-helvetica font-bold mb-1 whitespace-nowrap">GA.V.NO</h3>
                                <p class="text-[14px] font-helvetica font-light mb-8">Creative Director & Founder</p>
                                <p class="text-[14px] font-helvetica font-light leading-relaxed">A creative studio exploring the intersection of design, technology, and culture through innovative projects and collaborations.</p>
                            </div>
                            <div class="w-[500px] h-[280px] transition-all duration-300 ease-out group-hover:scale-[1.05] group-hover:shadow-2xl">
                                <img src="images/gavnoradiologocenter copy.jpg" alt="GA.V.NO" class="w-full h-full object-contain">
                            </div>
                        </div>
                    </a>
                </div>
            </section>

            <!-- Footer -->
            <footer class="bg-white border-t border-gray-200 mt-20">
                <div class="max-w-7xl mx-auto px-12 py-8">
                    <div class="flex justify-between items-center">
                        <div class="flex items-center space-x-8">
                            <div>
                                <h3 class="text-[20px] font-nuosu mb-0">Carlos Rodriguez</h3>
                                <p class="text-[14px] font-helvetica font-light text-gray-600">AI Product Manager</p>
                            </div>
                            <div class="border-l border-gray-300 h-12"></div>
                            <div>
                                <p class="text-[14px] font-helvetica font-light text-gray-600 mb-1">Let's build something thoughtful.</p>
                                <div class="flex space-x-4">
                                    <a href="mailto:c.a.rodriguez1999@gmail.com" class="text-[14px] font-helvetica font-light text-gray-600 hover:text-[#18a000] transition-colors">Email</a>
                                    <a href="https://linkedin.com" target="_blank" class="text-[14px] font-helvetica font-light text-gray-600 hover:text-[#18a000] transition-colors">LinkedIn</a>
                                    <a href="https://github.com" target="_blank" class="text-[14px] font-helvetica font-light text-gray-600 hover:text-[#18a000] transition-colors">GitHub</a>
                                </div>
                            </div>
                        </div>
                        <div class="text-right">
                            <p class="text-[14px] font-helvetica font-light text-gray-600">Â© 2025 Carlos Rodriguez</p>
                            <p class="text-[12px] font-helvetica font-light text-gray-500 mt-1">Co-founder of <span class="text-[#9a472f]">Better Problems</span></p>
                            <p class="text-[12px] font-helvetica font-light text-gray-500 mt-1">Powered by CursorAI, Figma, and GPT</p>
                        </div>
                    </div>
                </div>
            </footer>
        </div>
    </div>

    <!-- AI Sidekick -->
    <div class="fixed bottom-0 right-8 w-1/4 max-w-[394px] flex flex-col" id="ai-sidekick">
        <div class="font-['IBM_Plex_Mono'] text-[14px] space-y-4 mb-4 max-h-[calc(100vh-200px)] overflow-y-auto pr-2" id="chat-messages">
            <p class="text-[#18a000]">Hi! I'm Carlos's AI sidekick. I can navigate you through his portfolio and share insights about his process, values, and strategic thinking. Ask me anything about his projects, experience, or dive deeper into his approach!</p>
        </div>
        <div class="font-['IBM_Plex_Mono'] text-[14px] mb-4 flex">
            <span class="text-black mt-[2px]">></span>
            <div class="relative flex-1 ml-2">
                <textarea 
                    class="bg-transparent border-none font-['IBM_Plex_Mono'] text-[14px] w-full outline-none text-black resize-none overflow-hidden p-0 leading-normal"
                    placeholder="Ask me anything..."
                    id="chat-input"
                    rows="1"
                    style="height: 20px;"
                ></textarea>
            </div>
        </div>
        <div class="bg-[#18a000] p-4">
            <h3 class="text-white text-center font-['IBM_Plex_Mono'] font-bold">AI Sidekick</h3>
        </div>
    </div>

    <script>
        // Tab switching functionality
        function switchTab(tabName) {
            // Remove active class from all tab buttons
            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active');
            });
            
            // Hide all tab content
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            // Add active class to clicked button
            const activeButton = document.querySelector(`[onclick="switchTab('${tabName}')"]`);
            if (activeButton) {
                activeButton.classList.add('active');
            }
            
            // Show selected tab content
            const activeContent = document.getElementById(`${tabName}-tab`);
            if (activeContent) {
                activeContent.classList.remove('hidden');
            }
        }

        // Cursor functionality
        const cursor = document.getElementById('cursor');
        let links = document.querySelectorAll('a');
        let buttons = document.querySelectorAll('button');
        let isNavigating = false;
        let lastAINavigationPosition = null; // Track AI's final position

        document.addEventListener('mousemove', (e) => {
            if (!isNavigating && !lastAINavigationPosition) {
                cursor.style.left = e.clientX + 'px';
                cursor.style.top = e.clientY + 'px';
            } else if (!isNavigating && lastAINavigationPosition) {
                // User is moving the mouse after AI navigation - clear stored position
                lastAINavigationPosition = null;
                cursor.style.left = e.clientX + 'px';
                cursor.style.top = e.clientY + 'px';
            }
            // If isNavigating is true or lastAINavigationPosition exists, don't update cursor position
        });

        links.forEach(link => {
            link.addEventListener('mouseenter', () => {
                if (!isNavigating && !lastAINavigationPosition) {
                    cursor.classList.add('hover');
                }
            });
            
            link.addEventListener('mouseleave', () => {
                cursor.classList.remove('hover');
            });
        });

        buttons.forEach(button => {
            button.addEventListener('mouseenter', () => {
                if (!isNavigating && !lastAINavigationPosition) {
                    cursor.classList.add('hover');
                }
            });
            
            button.addEventListener('mouseleave', () => {
                cursor.classList.remove('hover');
            });
        });

        document.addEventListener('mouseleave', () => {
            cursor.style.display = 'none';
        });

        document.addEventListener('mouseenter', () => {
            cursor.style.display = 'block';
        });

        // Function to smoothly transition cursor from AI to user control
        function transitionCursorFromAI() {
            if (lastAINavigationPosition) {
                // Keep cursor at AI's final position
                cursor.style.left = lastAINavigationPosition.x + 'px';
                cursor.style.top = lastAINavigationPosition.y + 'px';
            }
            // Set isNavigating to false but keep the stored position
            isNavigating = false;
            // The stored position will be cleared only when user moves the mouse
        }

        // Enhanced responses with navigation capabilities and deeper insights
        const responses = {
            'microsoft': {
                keywords: ['microsoft', 'copilot', 'microsoft health', 'bachelors program', 'big tech', 'big tech company', 'tech company', 'large company', 'enterprise'],
                response: "Carlos worked at Microsoft on their healthcare initiatives! He helped design the Bachelors in Microsoft Health program. What's interesting about his approach is how he balanced enterprise constraints with human-centered design - he often talks about 'designing within the system' rather than against it. He learned to navigate complex stakeholder dynamics while maintaining design integrity. Let me show you that project.",
                action: () => {
                    const cursor = document.getElementById('cursor');
                    const targetLink = document.querySelector('a[href="bachelors-microsoft-health.html"]');
                    
                    cursor.classList.add('navigating');
                    
                    targetLink.scrollIntoView({ behavior: 'smooth', block: 'center', inline: 'center' });
                    setTimeout(() => {
                        const rect = targetLink.getBoundingClientRect();
                        cursor.style.transition = 'all 1s ease';
                        cursor.style.left = (rect.left + rect.width/2) + 'px';
                        cursor.style.top = (rect.top + rect.height/2) + 'px';
                        
                        setTimeout(() => {
                            // Store the final position before navigation
                            lastAINavigationPosition = {
                                x: rect.left + rect.width/2,
                                y: rect.top + rect.height/2
                            };
                            sessionStorage.setItem('isNavigating', 'true');
                            window.location.href = 'bachelors-microsoft-health.html';
                        }, 1000);
                    }, 800);
                }
            },
            'ai': {
                keywords: ['ai', 'artificial intelligence', 'gpt', 'chatgpt', 'ai technologies', 'machine learning', 'ai experience', 'chatgpt', 'gpt', 'openai'],
                response: "Carlos has extensive AI experience! He built an AI Research Workbook at Northwestern Medicine and worked on Microsoft Copilot integration. What's fascinating is his philosophy on AI - he believes in 'human-centered AI' where technology amplifies human judgment rather than replaces it. He often says his goal is to make AI feel more human, not less. His approach focuses on designing AI tools that build user confidence and agency. Let me show you his AI Research Workbook project.",
                action: () => {
                    const cursor = document.getElementById('cursor');
                    const targetLink = document.querySelector('a[href="ai-research-workbook.html"]');
                    
                    cursor.classList.add('navigating');
                    
                    targetLink.scrollIntoView({ behavior: 'smooth', block: 'center', inline: 'center' });
                    setTimeout(() => {
                        const rect = targetLink.getBoundingClientRect();
                        cursor.style.transition = 'all 1s ease';
                        cursor.style.left = (rect.left + rect.width/2) + 'px';
                        cursor.style.top = (rect.top + rect.height/2) + 'px';
                        
                        setTimeout(() => {
                            // Store the final position before navigation
                            lastAINavigationPosition = {
                                x: rect.left + rect.width/2,
                                y: rect.top + rect.height/2
                            };
                            sessionStorage.setItem('isNavigating', 'true');
                            window.location.href = 'ai-research-workbook.html';
                        }, 1000);
                    }, 800);
                }
            },
            'northwestern': {
                keywords: ['northwestern', 'northwestern medicine', 'nm scholars', 'ai research workbook', 'last project', 'recent work', 'latest project'],
                response: "I'll show you his Northwestern Medicine projects! He has two major projects there - the AI Research Workbook and the NM Scholars Program. What's really interesting about his Northwestern work is how he thinks about 'equity by design.' He believes that truly inclusive design means building systems that work for the most vulnerable users first, not as an afterthought. His process involves deep stakeholder engagement with communities that are often left out of innovation conversations. Let me show you his most recent work.",
                action: () => {
                    const cursor = document.getElementById('cursor');
                    const targetLink = document.querySelector('a[href="ai-research-workbook.html"]');
                    
                    cursor.classList.add('navigating');
                    
                    targetLink.scrollIntoView({ behavior: 'smooth', block: 'center', inline: 'center' });
                    setTimeout(() => {
                        const rect = targetLink.getBoundingClientRect();
                        cursor.style.transition = 'all 1s ease';
                        cursor.style.left = (rect.left + rect.width/2) + 'px';
                        cursor.style.top = (rect.top + rect.height/2) + 'px';
                        
                        setTimeout(() => {
                            // Store the final position before navigation
                            lastAINavigationPosition = {
                                x: rect.left + rect.width/2,
                                y: rect.top + rect.height/2
                            };
                            sessionStorage.setItem('isNavigating', 'true');
                            window.location.href = 'ai-research-workbook.html';
                        }, 1000);
                    }, 800);
                }
            },
            'healthcare': {
                keywords: ['healthcare', 'medical', 'clinical', 'health', 'medicine', 'healthcare experience'],
                response: "Carlos has significant healthcare experience! He worked at Northwestern Medicine on clinical learning programs and AI research tools. What's unique about his healthcare approach is his focus on 'systemic empathy' - he designs for the entire care ecosystem, not just individual touchpoints. He believes that healthcare innovation should reduce cognitive load for clinicians while improving patient outcomes. His work often involves mapping complex clinical workflows and identifying moments where technology can provide meaningful support. Let me show you his NM Scholars Program.",
                action: () => {
                    const cursor = document.getElementById('cursor');
                    const targetLink = document.querySelector('a[href="nm-scholars-program.html"]');
                    
                    cursor.classList.add('navigating');
                    
                    targetLink.scrollIntoView({ behavior: 'smooth', block: 'center', inline: 'center' });
                    setTimeout(() => {
                        const rect = targetLink.getBoundingClientRect();
                        cursor.style.transition = 'all 1s ease';
                        cursor.style.left = (rect.left + rect.width/2) + 'px';
                        cursor.style.top = (rect.top + rect.height/2) + 'px';
                        
                        setTimeout(() => {
                            // Store the final position before navigation
                            lastAINavigationPosition = {
                                x: rect.left + rect.width/2,
                                y: rect.top + rect.height/2
                            };
                            sessionStorage.setItem('isNavigating', 'true');
                            window.location.href = 'nm-scholars-program.html';
                        }, 1000);
                    }, 800);
                }
            },
            'process': {
                keywords: ['process', 'methodology', 'approach', 'how does he work', 'design process', 'strategy', 'thinking'],
                response: "Carlos's process is fascinating! He describes his approach as 'strategic empathy' - he starts by understanding the systemic context before diving into solutions. His methodology involves three phases: 1) Mapping the ecosystem and identifying leverage points, 2) Co-designing with stakeholders to build shared understanding, and 3) Prototyping at multiple scales simultaneously. He believes that the best solutions emerge when you design for both immediate needs and long-term system change. His process often involves creating frameworks that can scale with integrity.",
                action: null
            },
            'values': {
                keywords: ['values', 'philosophy', 'beliefs', 'principles', 'what does he care about', 'ethics'],
                response: "Carlos's core values center around 'equity by design' and 'human-centered systems.' He believes that technology should amplify human agency, not diminish it. His work is driven by a commitment to designing for communities that are often left out of innovation conversations. He values integrity in design - solutions that work for the most vulnerable users first. He often says that true innovation happens in the gray space between structure and creativity, where you can build frameworks that scale while maintaining human connection.",
                action: null
            },
            'strategy': {
                keywords: ['strategy', 'strategic thinking', 'big picture', 'systems thinking', 'how does he think strategically'],
                response: "Carlos's strategic thinking is rooted in systems design. He approaches problems by asking 'What are the underlying patterns?' rather than just 'What's the immediate solution?' His strategy involves identifying leverage points in complex systems - places where small interventions can create large-scale change. He believes in designing for multiple time horizons simultaneously: immediate user needs, medium-term system evolution, and long-term cultural shifts. His strategic approach often involves creating tools and frameworks that others can build upon.",
                action: null
            },
            'collaboration': {
                keywords: ['collaboration', 'teamwork', 'stakeholders', 'partnerships', 'how does he work with others'],
                response: "Carlos's collaboration style is built around 'shared clarity.' He believes that the best solutions emerge when diverse stakeholders have a common understanding of the problem space. His approach involves facilitating cross-disciplinary teams toward shared insights rather than just consensus. He's particularly skilled at bridging technical and non-technical perspectives, often translating complex system dynamics into accessible frameworks. His collaboration process involves creating visual tools that help teams see the same problem from different angles.",
                action: null
            },
            'innovation': {
                keywords: ['innovation', 'creative', 'new ideas', 'breakthrough', 'novel approaches'],
                response: "Carlos thinks about innovation as 'responsible creativity.' He believes that the most impactful innovations happen at the intersection of human needs and systemic constraints. His approach involves reframing problems to reveal new possibilities - often asking 'What if we designed for the edge cases first?' rather than the typical user. He's particularly interested in innovations that build user confidence and agency, especially in contexts where people feel disempowered by complex systems. His innovation process often involves prototyping experiences where technology becomes more human, not less.",
                action: null
            },
            'home': {
                keywords: ['home', 'main page', 'go back', 'return', 'landing page'],
                response: "Let me take you back to the home page!",
                action: () => {
                    const cursor = document.getElementById('cursor');
                    const homeLink = document.querySelector('a[href="index.html"]');
                    cursor.classList.add('navigating');
                    const rect = homeLink.getBoundingClientRect();
                    cursor.style.transition = 'all 1s ease';
                    cursor.style.left = (rect.left + rect.width/2) + 'px';
                    cursor.style.top = (rect.top + rect.height/2) + 'px';
                    setTimeout(() => {
                        // Store the final position before navigation
                        lastAINavigationPosition = {
                            x: rect.left + rect.width/2,
                            y: rect.top + rect.height/2
                        };
                        sessionStorage.setItem('isNavigating', 'true');
                        window.location.href = 'index.html';
                    }, 1000);
                }
            },
            'about': {
                keywords: ['about', 'who is', 'tell me about', 'background', 'who is carlos'],
                response: "Let me show you more about Carlos!",
                action: () => {
                    const cursor = document.getElementById('cursor');
                    const aboutLink = document.querySelector('a[href="about.html"]');
                    cursor.classList.add('navigating');
                    const rect = aboutLink.getBoundingClientRect();
                    cursor.style.transition = 'all 1s ease';
                    cursor.style.left = (rect.left + rect.width/2) + 'px';
                    cursor.style.top = (rect.top + rect.height/2) + 'px';
                    setTimeout(() => {
                        // Store the final position before navigation
                        lastAINavigationPosition = {
                            x: rect.left + rect.width/2,
                            y: rect.top + rect.height/2
                        };
                        sessionStorage.setItem('isNavigating', 'true');
                        window.location.href = 'about.html';
                    }, 1000);
                }
            },
            'contact': {
                keywords: ['contact', 'reach', 'email', 'connect', 'get in touch', 'how to contact'],
                response: "I'll show you his contact information! You can find his email, LinkedIn, and GitHub in the contact dropdown.",
                action: () => {
                    const cursor = document.getElementById('cursor');
                    const contactButton = document.querySelector('.contact-dropdown');
                    const contactDropdownMenu = document.querySelector('.contact-dropdown-menu');
                    
                    cursor.classList.add('navigating');
                    
                    // Move cursor to contact button
                    const rect = contactButton.getBoundingClientRect();
                    cursor.style.transition = 'all 1s ease';
                    cursor.style.left = (rect.left + rect.width/2) + 'px';
                    cursor.style.top = (rect.top + rect.height/2) + 'px';
                    
                    setTimeout(() => {
                        // Store the final position before showing dropdown
                        lastAINavigationPosition = {
                            x: rect.left + rect.width/2,
                            y: rect.top + rect.height/2
                        };
                        
                        // Show the dropdown
                        contactDropdownMenu.classList.remove('invisible', 'opacity-0');
                        contactDropdownMenu.classList.add('opacity-100', 'visible');
                        
                        setTimeout(() => {
                            cursor.style.transition = 'transform 0.2s ease, background-color 0.3s ease';
                            cursor.classList.remove('navigating');
                            transitionCursorFromAI(); // Use smooth transition
                        }, 500);
                    }, 1000);
                }
            },
            'resume': {
                keywords: ['resume', 'cv', 'experience', 'work history', 'download resume'],
                response: "I'll open his resume for you! It's a Google Docs link with his full experience and background.",
                action: () => {
                    const cursor = document.getElementById('cursor');
                    const resumeLink = document.querySelector('a[href*="docs.google.com"]');
                    cursor.classList.add('navigating');
                    const rect = resumeLink.getBoundingClientRect();
                    cursor.style.transition = 'all 1s ease';
                    cursor.style.left = (rect.left + rect.width/2) + 'px';
                    cursor.style.top = (rect.top + rect.height/2) + 'px';
                    setTimeout(() => {
                        // Store the final position before clicking
                        lastAINavigationPosition = {
                            x: rect.left + rect.width/2,
                            y: rect.top + rect.height/2
                        };
                        resumeLink.click();
                        setTimeout(() => {
                            cursor.style.transition = 'transform 0.2s ease, background-color 0.3s ease';
                            cursor.classList.remove('navigating');
                            transitionCursorFromAI(); // Use smooth transition
                        }, 100);
                    }, 1000);
                }
            }
        };

        function findResponse(input) {
            const lowercaseInput = input.toLowerCase();
            console.log('findResponse called with:', input);
            
            // First, check for navigation keywords (prioritize navigation over insights)
            const navigationKeywords = ['take me', 'go to', 'show me', 'navigate', 'latest', 'recent', 'project', 'projects', 'about', 'home', 'contact', 'resume'];
            const isNavigationQuery = navigationKeywords.some(keyword => lowercaseInput.includes(keyword));
            
            if (isNavigationQuery) {
                console.log('Navigation query detected, checking navigation responses first');
                // Check navigation responses first for navigation queries
                for (const category in responses) {
                    if (responses[category].keywords.some(keyword => lowercaseInput.includes(keyword))) {
                        console.log('Found navigation response for:', category);
                        return {
                            text: responses[category].response,
                            action: responses[category].action
                        };
                    }
                }
            }
            
            // Then, try the enhanced knowledge base for insight queries
            if (enhancedSidekick) {
                console.log('Enhanced sidekick available, searching...');
                console.log('Enhanced sidekick object:', enhancedSidekick);
                const enhancedResponse = enhancedSidekick.getResponse(input);
                console.log('Enhanced response:', enhancedResponse);
                
                // Check if we got a meaningful response (not the default)
                const defaultResponse = enhancedSidekick.getDefaultResponse();
                console.log('Default response:', defaultResponse);
                console.log('Response matches default?', enhancedResponse === defaultResponse);
                
                if (enhancedResponse && enhancedResponse !== defaultResponse) {
                    console.log('Using enhanced response');
                    return {
                        text: enhancedResponse,
                        action: null
                    };
                } else {
                    console.log('Enhanced response was default, falling back to navigation');
                }
            } else {
                console.log('Enhanced sidekick not available');
            }
            
            // Fall back to navigation responses (this block is now redundant for navigation queries due to the new `isNavigationQuery` check, but remains for general fallback)
            for (const category in responses) {
                if (responses[category].keywords.some(keyword => lowercaseInput.includes(keyword))) {
                    return {
                        text: responses[category].response,
                        action: responses[category].action
                    };
                }
            }
            
            // If no exact match, provide a helpful response
            return {
                text: "I can help you navigate through Carlos's portfolio and share insights about his process, values, and strategic thinking! Try asking about his projects, experience, AI work, healthcare experience, Northwestern Medicine projects, or dive deeper into his process, values, strategy, collaboration style, or innovation approach. What would you like to explore?",
                action: null
            };
        }

        // AI Sidekick functionality
        const chatMessages = document.getElementById('chat-messages');
        const chatInput = document.getElementById('chat-input');
        let isTyping = false;

        // Load chat history from sessionStorage
        function loadChatHistory() {
            const history = JSON.parse(sessionStorage.getItem('chatHistory')) || [];
            chatMessages.innerHTML = '';
            if (history.length === 0) {
                addMessage("Hi! I'm Carlos's AI sidekick. I can navigate you through his portfolio and share insights about his process, values, and strategic thinking. Ask me anything about his projects, experience, or dive deeper into his approach!", false);
            } else {
                history.forEach(msg => {
                    const p = document.createElement('p');
                    p.className = msg.isUser ? 'text-black' : 'text-[#18a000]';
                    if (msg.isUser) {
                        p.textContent = `> ${msg.text}`;
                    } else {
                        p.innerHTML = msg.text.replace(/\n/g, '<br>');
                    }
                    chatMessages.appendChild(p);
                });
            }
        }

        // Session tracking for chat history management
        function initializeSession() {
            const isFreshSession = !sessionStorage.getItem('sessionActive');
            const isAINavigation = sessionStorage.getItem('isNavigating') === 'true';
            const referrer = document.referrer;
            const isInternalNavigation = referrer && (
                referrer.includes('index.html') ||
                referrer.includes('projects.html') ||
                referrer.includes('about.html') ||
                referrer.includes('ai-research-workbook.html') ||
                referrer.includes('bachelors-microsoft-health.html') ||
                referrer.includes('nm-scholars-program.html')
            );
            
            // Check if this is a page refresh by looking at performance navigation type
            const isPageRefresh = performance.navigation.type === 1 || 
                                (performance.getEntriesByType('navigation')[0] && 
                                 performance.getEntriesByType('navigation')[0].type === 'reload');

            // Clear chat history if it's a fresh session (page refresh or direct access)
            // Preserve chat history during any internal navigation (AI or manual)
            if ((isFreshSession && !isInternalNavigation && !isAINavigation) || isPageRefresh) {
                sessionStorage.removeItem('chatHistory');
                sessionStorage.setItem('sessionActive', 'true');
            }
        }

        // Load chat history when page loads
        initializeSession();
        loadChatHistory();

        // Initialize enhanced AI Sidekick
        let enhancedSidekick = null;
        enhancedSidekick = new EnhancedAISidekick();

        function addMessage(text, isUser = false, animate = true) {
            const p = document.createElement('p');
            p.className = isUser ? 'text-black' : 'text-[#18a000]';
            if (isUser) {
                p.textContent = `> ${text}`;
            } else if (!animate) {
                p.innerHTML = text.replace(/\n/g, '<br>');
            }
            chatMessages.appendChild(p);

            if (!isUser && animate) {
                animateText(p, text);
            }

            chatMessages.scrollTop = chatMessages.scrollHeight;

            // Save to sessionStorage
            const history = JSON.parse(sessionStorage.getItem('chatHistory')) || [];
            history.push({ text, isUser });
            sessionStorage.setItem('chatHistory', JSON.stringify(history));
        }

        // Typing animation for dots
        function animateTypingDots(element) {
            let dots = 0;
            const interval = setInterval(() => {
                dots = (dots + 1) % 4;
                element.textContent = '.'.repeat(dots);
            }, 500);
            return interval;
        }

        // Text animation character by character
        async function animateText(element, text) {
            let currentText = '';
            const delay = 30; // ms between each character

            for (let i = 0; i < text.length; i++) {
                currentText += text[i];
                element.innerHTML = currentText;
                chatMessages.scrollTop = chatMessages.scrollHeight;
                await new Promise(resolve => setTimeout(resolve, delay));
            }
        }

        async function simulateTyping(text, action = null) {
            if (isTyping) return;
            isTyping = true;
            
            const typingIndicator = document.createElement('p');
            typingIndicator.className = 'text-[#18a000] font-mono';
            typingIndicator.textContent = '.';
            chatMessages.appendChild(typingIndicator);

            // Animate typing dots
            const dotsInterval = animateTypingDots(typingIndicator);

            // Wait before starting to type
            await new Promise(resolve => setTimeout(resolve, 1500));
            
            // Clear typing indicator
            clearInterval(dotsInterval);
            chatMessages.removeChild(typingIndicator);
            
            // Add and animate the message
            addMessage(text);
            isTyping = false;

            // Execute navigation action if provided
            if (action) {
                setTimeout(action, 500);
            }
        }

        // Handle chat input
        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                const message = chatInput.value.trim();
                if (message && !isTyping) {
                    addMessage(message, true);
                    chatInput.value = '';
                    autoResize();
                    
                    isTyping = true;
                    const typingElement = document.createElement('p');
                    typingElement.className = 'text-[#18a000]';
                    chatMessages.appendChild(typingElement);
                    
                    const typingInterval = animateTypingDots(typingElement);
                    
                    setTimeout(() => {
                        clearInterval(typingInterval);
                        chatMessages.removeChild(typingElement);
                        
                        const response = findResponse(message);
                        addMessage(response.text, false);
                        
                        if (response.action) {
                            setTimeout(() => {
                                response.action();
                            }, 1000);
                        }
                        
                        isTyping = false;
                    }, 1000);
                }
            }
        });

        // Add click handling for contact dropdown
        document.addEventListener('DOMContentLoaded', () => {
            const contactButton = document.querySelector('.contact-dropdown');
            const contactDropdownMenu = document.querySelector('.contact-dropdown-menu');
            
            if (contactButton && contactDropdownMenu) {
                contactButton.addEventListener('click', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    // Toggle dropdown visibility
                    const isVisible = contactDropdownMenu.classList.contains('visible');
                    
                    if (isVisible) {
                        contactDropdownMenu.classList.remove('opacity-100', 'visible');
                        contactDropdownMenu.classList.add('opacity-0', 'invisible');
                    } else {
                        contactDropdownMenu.classList.remove('invisible', 'opacity-0');
                        contactDropdownMenu.classList.add('opacity-100', 'visible');
                    }
                });
                
                // Close dropdown when clicking outside
                document.addEventListener('click', (event) => {
                    if (!contactDropdownMenu.contains(event.target) && !contactButton.contains(event.target)) {
                        contactDropdownMenu.classList.remove('opacity-100', 'visible');
                        contactDropdownMenu.classList.add('opacity-0', 'invisible');
                    }
                });
            }
        });

        // Auto-resize textarea
        function autoResize() {
            chatInput.style.height = 'auto';
            chatInput.style.height = chatInput.scrollHeight + 'px';
        }

        chatInput.addEventListener('input', autoResize);

        // Ensure chat history persists across navigation
        window.addEventListener('beforeunload', () => {
            // Don't clear chat history on page navigation
        });

        document.addEventListener('DOMContentLoaded', () => {
            const cursor = document.getElementById('cursor');
            // Check if we're coming from a navigation action
            if (sessionStorage.getItem('isNavigating') === 'true') {
                isNavigating = true;
                cursor.classList.add('navigating');
                
                // Position cursor at the projects link position
                const projectsLink = document.querySelector('a[href="projects.html"]');
                if (projectsLink) {
                    const rect = projectsLink.getBoundingClientRect();
                    cursor.style.left = (rect.left + rect.width/2) + 'px';
                    cursor.style.top = (rect.top + rect.height/2) + 'px';
                }
                
                setTimeout(() => {
                    cursor.style.transition = 'transform 0.2s ease, background-color 0.3s ease';
                    cursor.classList.remove('navigating');
                    sessionStorage.removeItem('isNavigating');
                    sessionStorage.removeItem('targetProject'); // Clear targetProject as well
                    transitionCursorFromAI(); // Use smooth transition
                }, 100);
            }

            // Check if we need to navigate to a specific project
            const targetProject = sessionStorage.getItem('targetProject');
            if (targetProject) {
                setTimeout(() => {
                    const targetLink = document.querySelector(`a[href="${targetProject}.html"]`);
                    if (targetLink) {
                        isNavigating = true;
                        cursor.classList.add('navigating');
                        
                        // Scroll to make the target link visible
                        targetLink.scrollIntoView({ 
                            behavior: 'smooth', 
                            block: 'center',
                            inline: 'center'
                        });
                        
                        // Wait for scroll to complete before animating cursor
                        setTimeout(() => {
                            const rect = targetLink.getBoundingClientRect();
                            cursor.style.transition = 'all 1s ease';
                            cursor.style.left = (rect.left + rect.width/2) + 'px';
                            cursor.style.top = (rect.top + rect.height/2) + 'px';
                            
                            setTimeout(() => {
                                // Store the final position before navigation
                                lastAINavigationPosition = {
                                    x: rect.left + rect.width/2,
                                    y: rect.top + rect.height/2
                                };
                                sessionStorage.setItem('isNavigating', 'true');
                                sessionStorage.setItem('targetProject', targetProject);
                                window.location.href = `${targetProject}.html`;
                            }, 1000);
                        }, 800); // Wait for scroll animation
                    }
                    sessionStorage.removeItem('targetProject');
                }, 500);
            }
        });
    </script>
    <style>
        /* Add custom scrollbar styling */
        #chat-messages::-webkit-scrollbar {
            width: 6px;
        }
        
        #chat-messages::-webkit-scrollbar-track {
            background: transparent;
        }
        
        #chat-messages::-webkit-scrollbar-thumb {
            background: #6b7280;
            border-radius: 3px;
        }
        
        #chat-messages::-webkit-scrollbar-thumb:hover {
            background: #4b5563;
        }


    </style>
</body>
</html> 