<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Better Problems - Carlos Rodriguez</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@500;700&family=Nuosu+SIL&display=swap" rel="stylesheet">
    <script src="simple-context-sidekick.js"></script>
    <script src="openai-sidekick.js"></script>
    <style>
        @font-face {
            font-family: "Helvetica Neue";
            src: url("fonts/HelveticaNeue-Light.woff2") format("woff2");
            font-weight: 300;
        }
        @font-face {
            font-family: "Helvetica Neue";
            src: url("fonts/HelveticaNeue-Medium.woff2") format("woff2");
            font-weight: 500;
        }
        @font-face {
            font-family: "Helvetica Neue";
            src: url("fonts/HelveticaNeue-Bold.woff2") format("woff2");
            font-weight: 700;
        }
        .font-helvetica { font-family: "Helvetica Neue", sans-serif; }
        .font-nuosu { font-family: "Nuosu SIL", serif; }
        .nav-link { position: relative; text-decoration: none; }
        .nav-link::after {
            content: "";
            position: absolute;
            width: 100%;
            height: 1px;
            bottom: -4px;
            left: 0;
            background-color: #000000;
            transform: scaleX(0);
            transform-origin: bottom right;
            transition: transform 0.3s ease;
        }
        .nav-link:hover::after { transform: scaleX(1); transform-origin: bottom left; }
        .nav-link.active::after { transform: scaleX(1); }
        * { cursor: none; }
        .cursor {
            width: 12px; height: 12px; background-color: #5E5E5E; border-radius: 50%; position: fixed; pointer-events: none; z-index: 99999; transition: transform 0.2s ease, background-color 0.3s ease;
        }
        .cursor.hover { transform: scale(1.5); }
        .cursor.navigating { background-color: #18A000; transform: scale(1.5); }
        input, textarea { cursor: text; }
        a, button { cursor: none; }
        .contact-dropdown { cursor: none; }
        .contact-dropdown + div a { cursor: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        
        /* Mobile Responsive Styles */
        @media (max-width: 768px) {
            /* Hide custom cursor on mobile */
            .cursor {
                display: none !important;
            }
            
            /* Re-enable default cursor on mobile */
            * {
                cursor: auto !important;
            }
            
            /* Mobile AI Sidekick Styles */
            /* Mobile collapsed state - small square button */
            #ai-sidekick {
                width: 60px !important;
                height: 60px !important;
                max-width: 60px !important;
                border-radius: 0 !important;
                bottom: 20px !important;
                right: 20px !important;
                margin: 0 !important;
                left: auto !important;
            }
            
            #ai-sidekick #sidekick-button {
                width: 100% !important;
                height: 100% !important;
                padding: 0 !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                border-radius: 0 !important;
            }
            
            #ai-sidekick #sidekick-text {
                font-size: 12px !important;
                font-weight: bold !important;
            }
            
            /* Mobile full-screen mode */
            #ai-sidekick.mobile-fullscreen {
                position: fixed !important;
                top: 0 !important;
                left: 0 !important;
                right: 0 !important;
                bottom: 0 !important;
                width: 100vw !important;
                height: 100vh !important;
                z-index: 10000 !important;
                background: white !important;
                border-radius: 0 !important;
                margin: 0 !important;
                padding: 0 !important;
                display: flex !important;
                flex-direction: column !important;
                max-width: none !important;
                max-height: none !important;
                transform: none !important;
                /* Safari-specific viewport fixes */
                height: -webkit-fill-available !important;
                min-height: -webkit-fill-available !important;
            }
            
            #ai-sidekick.mobile-fullscreen #chat-container {
                flex: 1 !important;
                display: flex !important;
                flex-direction: column !important;
                padding: 0 !important;
                background: white !important;
                position: relative !important;
                width: 100% !important;
                overflow: hidden !important;
            }
            
            #ai-sidekick.mobile-fullscreen #chat-messages {
                flex: 1 !important;
                padding: 80px 20px 0 20px !important;
                overflow-y: auto !important;
                max-height: none !important;
                width: 100% !important;
                display: flex !important;
                flex-direction: column !important;
                min-height: 0 !important;
                justify-content: flex-end !important;
                margin-top: 60px !important;
                /* Safari-specific fixes */
                -webkit-overflow-scrolling: touch !important;
                -webkit-transform: translateZ(0) !important;
                transform: translateZ(0) !important;
            }
            
            /* Mobile-only: Chat messages display from bottom to top */
            #ai-sidekick.mobile-fullscreen #chat-messages p {
                margin: 0 !important;
                padding: 8px 0 !important;
                flex-shrink: 0 !important;
            }
            
            #ai-sidekick.mobile-fullscreen #chat-input-container {
                position: sticky !important;
                bottom: 0 !important;
                background: white !important;
                padding: 20px !important;
                border-top: 1px solid #e5e7eb !important;
                width: 100% !important;
                flex-shrink: 0 !important;
                /* Safari-specific fixes */
                -webkit-transform: translateZ(0) !important;
                transform: translateZ(0) !important;
            }
            
            #ai-sidekick.mobile-fullscreen #sidekick-button {
                position: fixed !important;
                top: 10px !important;
                right: 10px !important;
                width: 40px !important;
                height: 40px !important;
                padding: 0 !important;
                border-radius: 0 !important;
                background: rgba(255, 255, 255, 0.9) !important;
                z-index: 99999 !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                border: none !important;
                left: auto !important;
                transform: none !important;
                pointer-events: auto !important;
            }
            
            /* White bar to cut off chat log before X button */
            #ai-sidekick.mobile-fullscreen::before {
                content: '' !important;
                position: fixed !important;
                top: 0 !important;
                left: 0 !important;
                right: 0 !important;
                width: 100% !important;
                height: 60px !important;
                background: white !important;
                z-index: 99998 !important;
                pointer-events: none !important;
            }
            
            #ai-sidekick.mobile-fullscreen #sidekick-text {
                font-size: 24px !important;
                font-weight: bold !important;
                color: #18a000 !important;
                z-index: 99999 !important;
            }
            
            /* Hide main content when sidekick is fullscreen on mobile */
            #main-content.mobile-hidden {
                display: none !important;
            }
            
            /* Email popup positioning for mobile */
            #email-popup {
                position: fixed !important;
                top: 20px !important;
                right: 80px !important;
                z-index: 99999 !important;
                background: transparent !important;
                box-shadow: none !important;
            }
            
            /* Mobile navigation text wrapping */
            .nav-link {
                white-space: normal !important;
                word-wrap: break-word !important;
            }
            

        }
    </style>
</head>
<body class="bg-white">
    <!-- Custom cursor -->
    <div class="cursor" id="cursor"></div>

    <!-- Main Content Area (responsive width) -->
    <div class="w-full md:w-3/4 overflow-x-hidden transition-all duration-500 ease-in-out" id="main-content">
        <!-- Navigation -->
        <nav class="fixed w-full md:w-3/4 z-50 transition-all duration-500 ease-in-out" id="main-nav">
            <div class="bg-white/80 backdrop-blur-lg px-4 md:px-12 py-4 md:py-6">
                <div class="flex justify-between items-center">
                    <h1 class="text-[20px] md:text-[28px] font-nuosu">Carlos Rodriguez</h1>
                    
                    <!-- Desktop Navigation -->
                    <div class="hidden md:flex space-x-12">
                        <a href="index.html" class="text-[16px] font-helvetica font-light nav-link relative">Home</a>
                        <a href="projects.html" class="text-[16px] font-helvetica font-light nav-link active relative">Projects</a>
                        <a href="https://docs.google.com/document/d/1RXj2iDbQUYEA5Zh2meN2EXdoaU2CWZfN_qSqDnq9CNY/edit?tab=t.0" target="_blank" class="text-[16px] font-helvetica font-light nav-link relative">Resume</a>
                        <a href="about.html" class="text-[16px] font-helvetica font-light nav-link relative">About</a>
                        <div class="relative group">
                            <button class="text-[16px] font-helvetica font-light nav-link relative contact-dropdown">Contact</button>
                            <div class="absolute top-full right-0 mt-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible contact-dropdown-menu transition-all duration-200 z-[9999]">
                                <div class="relative pr-4">
                                    <div class="bg-white/80 backdrop-blur-sm rounded-sm px-3 py-2">
                                        <div class="space-y-2 text-right">
                                            <p class="text-[14px] font-helvetica font-bold text-black whitespace-nowrap">Let's build something thoughtful.</p>
                                            <div class="space-y-1">
                                                <button onclick="copyEmail()" class="block text-[14px] font-helvetica font-light hover:text-[#18a000] transition-colors text-right w-full">c.a.rodriguez1999@gmail.com</button>
                                                <a href="https://www.linkedin.com/in/carloscoding/" target="_blank" class="block text-[14px] font-helvetica font-light hover:text-[#18a000] transition-colors">LinkedIn</a>
                                                <a href="https://github.com/CRodriguez245" target="_blank" class="block text-[14px] font-helvetica font-light hover:text-[#18a000] transition-colors">GitHub</a>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="absolute top-0 right-0 w-0.5 bg-black h-0 group-hover:h-full transition-all duration-500 ease-out"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Mobile Menu Button -->
                    <button id="mobile-menu-btn" class="md:hidden text-black">
                        <!-- Hamburger Icon -->
                        <svg class="w-6 h-6" id="hamburger-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                        </svg>
                        <!-- X Icon -->
                        <svg class="w-6 h-6 hidden" id="x-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                
                <!-- Mobile Navigation Menu -->
                <div id="mobile-menu" class="md:hidden hidden mt-4 pt-4 border-t border-gray-200">
                    <div class="flex flex-col space-y-4">
                        <a href="index.html" class="text-[16px] font-helvetica font-light nav-link relative">Home</a>
                        <a href="projects.html" class="text-[16px] font-helvetica font-light nav-link active relative">Projects</a>
                        <a href="https://docs.google.com/document/d/1RXj2iDbQUYEA5Zh2meN2EXdoaU2CWZfN_qSqDnq9CNY/edit?tab=t.0" target="_blank" class="text-[16px] font-helvetica font-light nav-link relative">Resume</a>
                        <a href="about.html" class="text-[16px] font-helvetica font-light nav-link relative">About</a>
                        <div class="relative" id="mobile-contact-dropdown">
                            <button class="text-[16px] font-helvetica font-light nav-link relative contact-dropdown" onclick="toggleMobileContact()">Contact</button>
                            <div class="mt-2 opacity-0 invisible contact-dropdown-menu transition-all duration-200" id="mobile-contact-menu">
                                <div class="relative pl-2">
                                    <div class="px-3 py-2">
                                        <div class="space-y-2 text-left">
                                            <p class="text-[14px] font-helvetica font-bold text-black whitespace-nowrap">Let's build something thoughtful.</p>
                                            <div class="space-y-1">
                                                <button onclick="copyEmail()" class="block text-[16px] font-helvetica font-light hover:text-[#18a000] transition-colors text-left w-full">c.a.rodriguez1999@gmail.com</button>
                                                <a href="https://www.linkedin.com/in/carloscoding/" target="_blank" class="block text-[16px] font-helvetica font-light hover:text-[#18a000] transition-colors">LinkedIn</a>
                                                <a href="https://github.com/CRodriguez245" target="_blank" class="block text-[16px] font-helvetica font-light hover:text-[#18a000] transition-colors">GitHub</a>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="absolute top-0 left-0 w-0.5 bg-black h-0 transition-all duration-500 ease-out" id="mobile-contact-line"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Content Section -->
        <div class="max-w-[960px] mx-auto pt-20 md:pt-24 px-4 md:px-12">
            <!-- Project Header -->
            <div class="mb-8 md:mb-24">
                <h2 class="text-[24px] md:text-[32px] font-helvetica font-medium mb-2">Better Problems</h2>
                <p class="text-[16px] md:text-[20px] font-helvetica text-gray-800">A blog and design consultancy for those asking harder, better questions.</p>
            </div>

            <!-- Project Details Grid -->
            <div class="flex flex-col md:flex-row gap-8 md:gap-[120px] mb-16 md:mb-32">
                <!-- Left Column - Project Info -->
                <div class="w-full md:w-[280px]">
                    <div class="mb-6">
                        <h3 class="text-[20px] font-helvetica font-bold mb-1">Role</h3>
                        <p class="text-[16px] font-helvetica whitespace-nowrap">Founder, Writer,</p>
                        <p class="text-[16px] font-helvetica font-light whitespace-nowrap">Principal Strategist</p>
                    </div>
                    <div class="mb-6">
                        <h3 class="text-[20px] font-helvetica font-bold mb-1">Organization</h3>
                        <p class="text-[16px] font-helvetica whitespace-nowrap">Independent Practice</p>
                        <p class="text-[16px] font-helvetica font-light whitespace-nowrap">Content + Consultancy</p>
                    </div>
                    <div class="mb-6">
                        <h3 class="text-[20px] font-helvetica font-bold mb-1">Timeline</h3>
                        <p class="text-[16px] font-helvetica whitespace-nowrap">Ongoing</p>
                    </div>
                    <div class="mb-6">
                        <h3 class="text-[20px] font-helvetica font-bold mb-1">Tools</h3>
                        <p class="text-[16px] font-helvetica whitespace-nowrap">Writing & Editing</p>
                        <p class="text-[16px] font-helvetica whitespace-nowrap">Systems Mapping</p>
                        <p class="text-[16px] font-helvetica whitespace-nowrap">Facilitation</p>
                        <p class="text-[16px] font-helvetica whitespace-nowrap">Strategy</p>
                    </div>
                    <div>
                        <h3 class="text-[20px] font-helvetica font-bold mb-1">Focus</h3>
                        <p class="text-[16px] font-helvetica whitespace-nowrap">Critical Design</p>
                        <p class="text-[16px] font-helvetica whitespace-nowrap">HCI & AI Framing</p>
                        <p class="text-[16px] font-helvetica whitespace-nowrap">Ethics & Equity</p>
                    </div>
                </div>

                <!-- Right Column - Hero Image -->
                <div class="w-full md:w-[740px] h-64 md:h-[538px] overflow-hidden transition-all duration-300 ease-out hover:shadow-2xl hover:scale-105">
                    <img src="images/BP-Card2.jpg" alt="Better Problems Hero" class="w-full h-full object-cover">
                </div>
            </div>

            <!-- Overview -->
            <div class="flex flex-col md:flex-row gap-8 md:gap-[120px] mb-16 md:mb-32">
                <div class="w-full md:w-[280px]">
                    <h2 class="text-[24px] md:text-[28px] font-nuosu mb-8">Overview</h2>
                </div>
                <div class="w-full md:w-[740px] space-y-6">
                    <p class="text-[16px] font-helvetica leading-relaxed">Better Problems is both a content platform and a consulting practice rooted in the belief that design should clarify, not oversimplify — and that good solutions come from better questions.</p>
                    <p class="text-[16px] font-helvetica leading-relaxed">As a blog, Better Problems publishes essays on culture, technology, systems, and creativity — helping readers reframe how they see the world, one thoughtful provocation at a time.</p>
                    <p class="text-[16px] font-helvetica leading-relaxed">As a consultancy, it supports mission-driven teams in tackling ambiguity, mapping systemic friction, and designing interventions that balance impact, integrity, and equity.</p>
                    <p class="text-[16px] font-helvetica leading-relaxed">It’s not about problem-solving faster. It’s about problem-framing deeper.</p>
                </div>
            </div>

            <!-- The Blog -->
            <div class="mb-16 md:mb-32">
                <h2 class="text-[24px] md:text-[28px] font-nuosu mb-8">The Blog</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-24">
                    <div class="space-y-4">
                        <h3 class="text-[20px] font-helvetica font-bold">Better Problems: The Journal</h3>
                        <p class="text-[16px] font-helvetica leading-relaxed">An evolving set of essays and visual content reflecting on design, AI, cultural systems, and the future of creative practice. Each piece is structured to be short, sharp, and nonlinear — more prompt than prescription.</p>
                        <h4 class="text-[16px] font-helvetica font-bold mt-6">Selected Articles:</h4>
                        <ul class="text-[16px] font-helvetica list-disc pl-8 space-y-2">
                            <li>AI Beyond the Chat — A critique of conversational UX as a shallow default</li>
                            <li>Scaling Trust Is the Product — On PMs, automation, and the ethics of delegation</li>
                            <li>Surface Tension — A reflection on Karyn Nakamura and friction as access</li>
                            <li>What Is a Better Problem? — A statement of ethos, inviting others to question more intentionally</li>
                        </ul>
                        <h4 class="text-[16px] font-helvetica font-bold mt-6">Content Style:</h4>
                        <ul class="text-[16px] font-helvetica list-disc pl-8 space-y-2">
                            <li>Short essays (2–4 min reads)</li>
                            <li>Optional audio narration for accessibility</li>
                            <li>Inspired by cultural criticism, systems thinking, and human–computer interaction</li>
                        </ul>
                    </div>
                    <div class="space-y-4">
                        <h3 class="text-[20px] font-helvetica font-bold">The Consultancy</h3>
                        <p class="text-[16px] font-helvetica leading-relaxed">Better Problems provides strategy and design support to teams navigating complexity — particularly in the fields of education, healthcare, and social innovation.</p>
                        <h4 class="text-[16px] font-helvetica font-bold mt-6">Services include:</h4>
                        <ul class="text-[16px] font-helvetica list-disc pl-8 space-y-2">
                            <li>Strategic problem framing and systems mapping</li>
                            <li>Stakeholder co-creation and equity-centered facilitation</li>
                            <li>Narrative synthesis, sensemaking, and strategic storytelling</li>
                            <li>Responsible AI product framing and behavior modeling</li>
                        </ul>
                        <h4 class="text-[16px] font-helvetica font-bold mt-6">Ideal Clients:</h4>
                        <ul class="text-[16px] font-helvetica list-disc pl-8 space-y-2">
                            <li>Mission-aligned teams seeking clarity before solutions</li>
                            <li>Organizations feeling stuck in growth, scale, or change</li>
                            <li>Institutions facing ethical or cultural tension in their systems</li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- Origin -->
            <div class="flex gap-[120px] mb-32">
                <div class="w-[280px]">
                    <h2 class="text-[28px] font-nuosu mb-8">Origin</h2>
                </div>
                <div class="w-[740px] space-y-6">
                    <p class="text-[16px] font-helvetica leading-relaxed">Better Problems emerged from a tension felt in much of today’s design work: a rush toward novelty over nuance, and a bias for solutions over context. It’s a rebellion against “move fast and fix nothing.”</p>
                    <p class="text-[16px] font-helvetica leading-relaxed">It’s grounded in design ethics, HCI thinking, and lived experience as a first-generation designer working at the intersection of systems, storytelling, and equity.</p>
                </div>
            </div>

            <!-- My Role -->
            <div class="flex gap-[120px] mb-32">
                <div class="w-[280px]">
                    <h2 class="text-[28px] font-nuosu mb-8">My Role</h2>
                </div>
                <div class="w-[740px]">
                    <p class="text-[16px] font-helvetica leading-relaxed">Founder, writer, and principal strategist. I lead all editorial content, consultative engagements, and brand voice. The tone is intentional, critical, and curious — meant to provoke reflection, not just agreement.</p>
                </div>
            </div>

            <!-- Future Directions -->
            <div class="mb-32">
                <h2 class="text-[28px] font-nuosu mb-8">Future Directions</h2>
                <ul class="text-[16px] font-helvetica list-disc pl-8 space-y-2">
                    <li>Print zine of the most resonant essays</li>
                    <li>Workshops and toolkits for reframing problems</li>
                    <li>Guest writers and collaborators</li>
                    <li>Curriculum for universities or civic design studios</li>
                </ul>
            </div>

            <!-- Quote -->
            <div class="mb-32 border-l-4 border-[#18a000] pl-8">
                <blockquote class="text-[24px] font-helvetica font-light italic leading-relaxed">“We don’t need better solutions. We need better problems.”</blockquote>
            </div>

            <!-- Navigation -->
            <div class="flex justify-end mt-16 mb-8">
                <a href="epicac.html" class="flex items-center space-x-2 text-[16px] font-helvetica font-light hover:text-[#18a000] transition-colors group">
                    <span>EPICAC</span>
                    <span class="text-[18px] transform group-hover:translate-x-1 transition-transform">></span>
                </a>
            </div>
        </div>

        <!-- Footer -->
        <footer class="bg-white border-t border-gray-200 mt-12 md:mt-20">
            <div class="max-w-7xl mx-auto px-4 md:px-12 py-6 md:py-8">
                <div class="hidden md:flex md:flex-row md:justify-between md:items-center space-y-4 md:space-y-0">
                    <div class="flex flex-col md:flex-row md:items-center space-y-4 md:space-y-0 md:space-x-8">
                        <div>
                            <h3 class="text-[18px] md:text-[20px] font-nuosu mb-0">Carlos Rodriguez</h3>
                            <p class="text-[12px] md:text-[14px] font-helvetica font-light text-gray-600">AI Product Manager</p>
                        </div>
                        <div class="hidden md:block border-l border-gray-300 h-12"></div>
                        <div class="hidden md:block">
                            <p class="text-[12px] md:text-[14px] font-helvetica font-light text-gray-600 mb-1">Let's build something thoughtful.</p>
                            <div class="flex space-x-4">
                                <button onclick="copyEmail()" class="text-[12px] md:text-[14px] font-helvetica font-light text-gray-600 hover:text-[#18a000] transition-colors">Email</button>
                                <a href="https://www.linkedin.com/in/carloscoding/" target="_blank" class="text-[12px] md:text-[14px] font-helvetica font-light text-gray-600 hover:text-[#18a000] transition-colors">LinkedIn</a>
                                <a href="https://github.com/CRodriguez245" target="_blank" class="text-[12px] md:text-[14px] font-helvetica font-light text-gray-600 hover:text-[#18a000] transition-colors">GitHub</a>
                            </div>
                        </div>
                    </div>
                    <div class="flex flex-col md:flex-row md:items-center space-y-4 md:space-y-0">
                        <div class="hidden md:block text-center md:text-right">
                            <p class="text-[14px] font-helvetica font-light text-gray-600">© 2025 Carlos Rodriguez</p>
                            <p class="text-[12px] font-helvetica font-light text-gray-500 mt-1">Co-founder of <span class="text-[#9a472f]">Better Problems</span></p>
                            <p class="text-[12px] font-helvetica font-light text-gray-500 mt-1">Powered by Cursor AI, Figma, and GPT</p>
                        </div>
                    </div>
                </div>
                <div class="md:hidden flex justify-between items-start mb-4">
                    <div>
                        <h3 class="text-[18px] md:text-[20px] font-nuosu mb-0">Carlos Rodriguez</h3>
                        <p class="text-[12px] md:text-[14px] font-helvetica font-light text-gray-600">AI Product Manager</p>
                    </div>
                    <div class="text-right">
                        <p class="text-[12px] md:text-[14px] font-helvetica font-light text-gray-600 mb-1">Let's build something thoughtful.</p>
                        <div class="flex space-x-4 justify-end">
                            <button onclick="copyEmail()" class="text-[12px] md:text-[14px] font-helvetica font-light text-gray-600 hover:text-[#18a000] transition-colors">Email</button>
                            <a href="https://www.linkedin.com/in/carloscoding/" target="_blank" class="text-[12px] md:text-[14px] font-helvetica font-light text-gray-600 hover:text-[#18a000] transition-colors">LinkedIn</a>
                            <a href="https://github.com/CRodriguez245" target="_blank" class="text-[12px] md:text-[14px] font-helvetica font-light text-gray-600 hover:text-[#18a000] transition-colors">GitHub</a>
                        </div>
                    </div>
                </div>
                <div class="md:hidden text-center">
                    <p class="text-[14px] font-helvetica font-light text-gray-600">© 2025 Carlos Rodriguez</p>
                    <p class="text-[12px] font-helvetica font-light text-gray-500 mt-1">Co-founder of <span class="text-[#9a472f]">Better Problems</span></p>
                    <p class="text-[12px] font-helvetica font-light text-gray-500 mt-1">Powered by Cursor AI, Figma, and GPT</p>
                </div>
            </div>
        </footer>
    </div>

    <!-- Email Copy Popup -->
    <div id="email-popup" class="fixed top-4 right-4 text-gray-700 px-3 py-2 font-helvetica text-[12px] z-[10000] transition-all duration-300 ease-in-out" style="display: none; opacity: 0; transform: translateY(-10px);">
        <span>Email copied to clipboard</span>
        <!-- Rolling line animation -->
        <div class="absolute top-0 right-0 w-1 h-full bg-black transform scale-y-0 transition-transform duration-500 ease-out origin-top" id="popup-line"></div>
    </div>

    <!-- AI Sidekick -->
    <div class="fixed bottom-0 right-2 md:right-8 w-[calc(100vw-16px)] md:w-1/4 md:max-w-[394px] flex flex-col z-[9999] transition-all duration-500 ease-in-out" id="ai-sidekick">
        <div class="overflow-hidden transition-all duration-500 ease-in-out" id="chat-container">
            <div class="font-['IBM_Plex_Mono'] text-[14px] space-y-4 mb-4 max-h-[calc(100vh-200px)] overflow-y-auto pr-2" id="chat-messages">
                <p class="text-[#18a000]">Hi! I'm Carlos's AI sidekick. I can navigate you through his portfolio and share insights about his process, values, and strategic thinking. Ask me anything about his projects, experience, or dive deeper into his approach!</p>
            </div>
            <div class="font-['IBM_Plex_Mono'] text-[14px] mb-4 flex" id="chat-input-container">
                <span class="text-black mt-[2px]">></span>
                <div class="relative flex-1 ml-2">
                    <textarea class="bg-transparent border-none font-['IBM_Plex_Mono'] text-[14px] w-full outline-none text-black resize-none overflow-hidden p-0 leading-normal" placeholder="Ask me anything..." id="chat-input" rows="1" style="height: 20px;"></textarea>
                </div>
            </div>
        </div>
        <div class="bg-[#18a000] p-4 cursor-pointer transition-all duration-500 ease-in-out" id="sidekick-button" onclick="toggleSidekick()">
            <h3 class="text-white text-center font-['IBM_Plex_Mono'] font-bold transition-all duration-500 ease-in-out" id="sidekick-text">AI Sidekick</h3>
        </div>
    </div>

    <script>
        // Cursor functionality
        const cursor = document.getElementById('cursor');
        let links = document.querySelectorAll('a');
        let buttons = document.querySelectorAll('button');
        let isNavigating = false;
        let lastAINavigationPosition = null;

        document.addEventListener('mousemove', (e) => {
            if (!isNavigating && !lastAINavigationPosition) {
                cursor.style.left = e.clientX + 'px';
                cursor.style.top = e.clientY + 'px';
            } else if (!isNavigating && lastAINavigationPosition) {
                lastAINavigationPosition = null;
                cursor.style.left = e.clientX + 'px';
                cursor.style.top = e.clientY + 'px';
            }
        });

        links.forEach(link => {
            link.addEventListener('mouseenter', () => { if (!isNavigating && !lastAINavigationPosition) { cursor.classList.add('hover'); } });
            link.addEventListener('mouseleave', () => { if (!isNavigating && !lastAINavigationPosition) { cursor.classList.remove('hover'); } });
        });
        buttons.forEach(button => {
            button.addEventListener('mouseenter', () => { if (!isNavigating && !lastAINavigationPosition) { cursor.classList.add('hover'); } });
            button.addEventListener('mouseleave', () => { if (!isNavigating && !lastAINavigationPosition) { cursor.classList.remove('hover'); } });
        });

        // AI Sidekick
        const chatMessages = document.getElementById('chat-messages');
        const chatInput = document.getElementById('chat-input');
        let isTyping = false;
        let simpleSidekick = new SimpleContextSidekick();
        
        // Auto-resize textarea
        function autoResize() {
            chatInput.style.height = 'auto';
            chatInput.style.height = chatInput.scrollHeight + 'px';
        }

        chatInput.addEventListener('input', autoResize);

        // Load chat history from sessionStorage
        function loadChatHistory() {
            const history = JSON.parse(sessionStorage.getItem('chatHistory')) || [];
            chatMessages.innerHTML = '';
            if (history.length === 0) {
                addMessage("Hi! I'm Carlos's AI sidekick. I can navigate you through his portfolio and share insights about his process, values, and strategic thinking. Ask me anything about his projects, experience, or dive deeper into his approach!", false);
            } else {
                history.forEach(msg => {
                    const p = document.createElement('p');
                    p.className = msg.isUser ? 'text-black' : 'text-[#18a000]';
                    if (msg.isUser) {
                        p.textContent = `> ${msg.text}`;
                    } else {
                        p.textContent = msg.text;
                    }
                    chatMessages.appendChild(p);
                });
            }
        }

        // Session tracking for chat history management
        function initializeSession() {
            const isFreshSession = !sessionStorage.getItem('sessionActive');
            const isAINavigation = sessionStorage.getItem('isNavigating') === 'true';
            const referrer = document.referrer;
            const isInternalNavigation = referrer && (
                referrer.includes('index.html') ||
                referrer.includes('projects.html') ||
                referrer.includes('about.html') ||
                referrer.includes('ai-research-workbook.html') ||
                referrer.includes('bachelors-microsoft-health.html') ||
                referrer.includes('nm-scholars-program.html') ||
                referrer.includes('better-problems-project.html') ||
                referrer.includes('epicac.html') ||
                referrer.includes('gavno.html')
            );
            
            // Check if this is a page refresh by looking at performance navigation type
            const isPageRefresh = performance.navigation.type === 1 || 
                                (performance.getEntriesByType('navigation')[0] && 
                                 performance.getEntriesByType('navigation')[0].type === 'reload');

            // Clear chat history if it's a fresh session (page refresh or direct access)
            // Preserve chat history during any internal navigation (AI or manual)
            if ((isFreshSession && !isInternalNavigation && !isAINavigation) || isPageRefresh) {
                sessionStorage.removeItem('chatHistory');
                sessionStorage.setItem('sessionActive', 'true');
            }
        }

        // Load chat history when page loads
        initializeSession();
        loadChatHistory();
        
        // Sidekick toggle state
        let sidekickCollapsed = false;
        
        // Track if this is a navigation (not refresh)
        let isNavigation = false;
        
        // Set up beforeunload listener to detect navigation vs refresh
        window.addEventListener('beforeunload', function() {
            // If we're navigating to another page in our site, mark it as navigation
            const currentUrl = window.location.href;
            const nextUrl = sessionStorage.getItem('nextUrl');
            
            if (nextUrl && nextUrl !== currentUrl) {
                isNavigation = true;
                sessionStorage.setItem('isNavigation', 'true');
            }
        });
        
        // Set up click listeners for navigation links
        document.addEventListener('DOMContentLoaded', function() {
            const links = document.querySelectorAll('a[href]');
            links.forEach(link => {
                link.addEventListener('click', function() {
                    const href = this.getAttribute('href');
                    if (href && !href.startsWith('http') && !href.startsWith('#')) {
                        sessionStorage.setItem('nextUrl', window.location.origin + href);
                    }
                });
            });
        });
        
        // Initialize sidekick state from sessionStorage
        function initializeSidekickState() {
            console.log('=== INITIALIZATION DEBUG ===');
            const savedState = sessionStorage.getItem('sidekickCollapsed');
            const wasNavigation = sessionStorage.getItem('isNavigation');
            
            console.log('Initializing sidekick state:', savedState);
            console.log('Was navigation:', wasNavigation);
            
            // Clear the navigation flag
            sessionStorage.removeItem('isNavigation');
            sessionStorage.removeItem('nextUrl');
            
            // Apply collapsed state if it was a navigation and sidekick was collapsed
            if (savedState === 'true' && wasNavigation === 'true') {
                console.log('Applying collapsed state from navigation...');
                // Apply collapsed state on page load
                const aiSidekick = document.getElementById('ai-sidekick');
                const chatContainer = document.getElementById('chat-container');
                const sidekickText = document.getElementById('sidekick-text');
                const mainContent = document.getElementById('main-content');
                
                console.log('Elements found during initialization:', {
                    aiSidekick: !!aiSidekick,
                    chatContainer: !!chatContainer,
                    sidekickText: !!sidekickText,
                    mainContent: !!mainContent
                });
                
                if (aiSidekick && chatContainer && sidekickText && mainContent) {
                    // Set initial collapsed state
                    console.log('Setting collapsed state...');
                    chatContainer.style.display = 'none';
                    aiSidekick.style.width = '80px';
                    aiSidekick.style.maxWidth = '80px';
                    sidekickText.style.fontSize = '14px';
                    sidekickText.textContent = 'AI';
                    mainContent.style.width = '75%';
                    mainContent.style.marginLeft = '12.5%'; // Center the 75% content
                    sidekickCollapsed = true;
                    
                    console.log('Applied collapsed state successfully');
                } else {
                    console.error('Some elements not found during initialization');
                }
            } else {
                console.log('Not navigation or no saved state - resetting to expanded state');
                // Reset to expanded state on refresh, direct access, or external navigation
                sessionStorage.setItem('sidekickCollapsed', 'false');
                sidekickCollapsed = false;
            }
            console.log('=== END INITIALIZATION DEBUG ===');
        }
        
        // Toggle AI Sidekick function
        function toggleSidekick() {
            console.log('=== TOGGLE SIDEKICK DEBUG ===');
            console.log('Toggle sidekick called, current state:', sidekickCollapsed);
            
            const aiSidekick = document.getElementById('ai-sidekick');
            const chatContainer = document.getElementById('chat-container');
            const sidekickText = document.getElementById('sidekick-text');
            const mainContent = document.getElementById('main-content');
            const chatInput = document.getElementById('chat-input');
            
            console.log('Elements found:', {
                aiSidekick: !!aiSidekick,
                chatContainer: !!chatContainer,
                sidekickText: !!sidekickText,
                mainContent: !!mainContent,
                chatInput: !!chatInput
            });
            
            // Check if mobile
            const isMobile = window.innerWidth <= 768;
            
            if (isMobile) {
                // Mobile behavior
                if (sidekickCollapsed) {
                    console.log('Expanding sidekick on mobile...');
                    aiSidekick.classList.add('mobile-fullscreen');
                    mainContent.classList.add('mobile-hidden');
                    sidekickText.textContent = '×';
                    sidekickCollapsed = false;
                    sessionStorage.setItem('sidekickCollapsed', 'false');
                } else {
                    console.log('Collapsing sidekick on mobile...');
                    aiSidekick.classList.remove('mobile-fullscreen');
                    mainContent.classList.remove('mobile-hidden');
                    sidekickText.textContent = 'AI';
                    sidekickCollapsed = true;
                    sessionStorage.setItem('sidekickCollapsed', 'true');
                }
            } else {
                // Desktop behavior
                if (sidekickCollapsed) {
                    console.log('Expanding sidekick on desktop...');
                    
                    // Force show the container - remove all conflicting styles
                    chatContainer.style.display = 'block';
                    chatContainer.style.visibility = 'visible';
                    chatContainer.style.opacity = '1';
                    chatContainer.style.maxHeight = 'none';
                    chatContainer.style.overflow = 'visible';
                    chatContainer.style.height = 'auto';
                    chatContainer.style.width = '100%';
                    
                    aiSidekick.style.width = '25%';
                    aiSidekick.style.maxWidth = '394px';
                    sidekickText.style.fontSize = '14px';
                    sidekickText.textContent = 'AI Sidekick';
                    mainContent.style.width = '75%';
                    mainContent.style.marginLeft = '0';
                    
                    // Ensure input is visible and functional
                    if (chatInput) {
                        chatInput.style.display = 'block';
                        chatInput.style.visibility = 'visible';
                        chatInput.style.opacity = '1';
                        chatInput.focus();
                        console.log('Input field restored successfully');
                    }
                    
                    sidekickCollapsed = false;
                    sessionStorage.setItem('sidekickCollapsed', 'false');
                    console.log('Sidekick expanded, state saved');
                } else {
                    console.log('Collapsing sidekick on desktop...');
                    // Collapse sidekick - hide the container
                    chatContainer.style.display = 'none';
                    aiSidekick.style.width = '80px';
                    aiSidekick.style.maxWidth = '80px';
                    sidekickText.style.fontSize = '14px';
                    sidekickText.textContent = 'AI';
                    mainContent.style.width = '75%';
                    mainContent.style.marginLeft = '12.5%'; // Center the 75% content
                    sidekickCollapsed = true;
                    sessionStorage.setItem('sidekickCollapsed', 'true');
                    console.log('Sidekick collapsed, state saved');
                }
            }
            console.log('=== END TOGGLE DEBUG ===');
        }

        function addMessage(text, isUser = false, animate = true) {
            const p = document.createElement('p');
            p.className = isUser ? 'text-black' : 'text-[#18a000]';
            if (isUser) { p.textContent = `> ${text}`; }
            else if (!animate) { p.innerHTML = text.replace(/\n/g, '<br>'); }
            chatMessages.appendChild(p);
            if (!isUser && animate) { animateText(p, text); }
            chatMessages.scrollTop = chatMessages.scrollHeight;

            // Save to sessionStorage
            const history = JSON.parse(sessionStorage.getItem('chatHistory')) || [];
            history.push({ text, isUser });
            sessionStorage.setItem('chatHistory', JSON.stringify(history));
        }
        function animateText(element, text) {
            element.textContent = '';
            let i = 0; isTyping = true;
            function typeChar() {
                if (i < text.length) { element.textContent += text.charAt(i); i++; setTimeout(typeChar, 20); }
                else { isTyping = false; }
            }
            typeChar();
        }
        function findResponse(userInput) {
            const input = userInput.toLowerCase();
            if (input.includes('better problems') || input.includes('consultancy') || input.includes('blog')) {
                return "Better Problems is my independent platform and consultancy focused on reframing problems rather than rushing to solutions. It blends critical design, systems thinking, and responsible AI framing—through essays and strategic engagements.";
            }
            if (input.includes('services') || input.includes('client')) {
                return "Services include strategic problem framing, systems mapping, equity-centered facilitation, narrative synthesis, and responsible AI product framing. Ideal clients are mission-aligned teams navigating growth, scale, or ethical tensions.";
            }
            if (input.includes('articles') || input.includes('journal')) {
                return "Selected essays include 'AI Beyond the Chat', 'Trust Is the Product', 'Surface Tension', and 'What Is a Better Problem?'. Short, sharp, and intended as prompts rather than prescriptions.";
            }
            return "Ask me about Better Problems, EPICAC, GA.V.NO, or any other projects—I'll guide you.";
        }

        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                const message = chatInput.value.trim();
                if (message && !isTyping) {
                    addMessage(message, true);
                    chatInput.value = '';
                    autoResize();
                    setTimeout(() => { addMessage(findResponse(message)); }, 500);
                }
            }
        });

        // Contact dropdown safeguard
        document.addEventListener('DOMContentLoaded', function () {
            const contactDropdown = document.querySelector('.contact-dropdown');
            const dropdownMenu = document.querySelector('.contact-dropdown-menu');
            if (contactDropdown && dropdownMenu) {
                contactDropdown.addEventListener('click', function (e) { e.preventDefault(); });
            }
            
            // Initialize sidekick state from sessionStorage
            initializeSidekickState();
        });

        // Manual test function for debugging
        window.testSidekickExpansion = function() {
            console.log('=== MANUAL TEST BETTER PROBLEMS ===');
            console.log('Current sidekickCollapsed state:', sidekickCollapsed);
            console.log('Session storage value:', sessionStorage.getItem('sidekickCollapsed'));

            const aiSidekick = document.getElementById('ai-sidekick');
            const chatContainer = document.getElementById('chat-container');
            const sidekickText = document.getElementById('sidekick-text');
            const mainContent = document.getElementById('main-content');
            const chatInput = document.getElementById('chat-input');

            console.log('All elements found:', {
                aiSidekick: !!aiSidekick,
                chatContainer: !!chatContainer,
                sidekickText: !!sidekickText,
                mainContent: !!mainContent,
                chatInput: !!chatInput
            });

            if (chatContainer) {
                console.log('Chat container current styles:', {
                    display: chatContainer.style.display,
                    visibility: chatContainer.style.visibility,
                    opacity: chatContainer.style.opacity,
                    maxHeight: chatContainer.style.maxHeight,
                    overflow: chatContainer.style.overflow,
                    height: chatContainer.style.height,
                    width: chatContainer.style.width
                });
            }

            if (sidekickText) {
                console.log('Sidekick text current styles:', {
                    textContent: sidekickText.textContent,
                    fontSize: sidekickText.style.fontSize,
                    color: sidekickText.style.color
                });
            }

            // Try to force expand
            if (sidekickCollapsed && chatContainer) {
                console.log('Attempting to force expand...');
                chatContainer.style.display = 'block';
                chatContainer.style.visibility = 'visible';
                chatContainer.style.opacity = '1';
                chatContainer.style.maxHeight = 'none';
                chatContainer.style.overflow = 'visible';
                chatContainer.style.height = 'auto';
                chatContainer.style.width = '100%';
                sidekickCollapsed = false;
                console.log('Force expand completed');
            }
        };

        // Copy email to clipboard
        function copyEmail() {
            const email = 'c.a.rodriguez1999@gmail.com';
            
            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(email).then(() => {
                    showEmailPopup();
                }).catch(err => {
                    console.error('Failed to copy: ', err);
                    fallbackCopyEmail(email);
                });
            } else {
                fallbackCopyEmail(email);
            }
        }

        // Fallback copy method for older browsers
        function fallbackCopyEmail(email) {
            const textArea = document.createElement('textarea');
            textArea.value = email;
            textArea.style.position = 'fixed';
            textArea.style.left = '-999999px';
            textArea.style.top = '-999999px';
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                document.execCommand('copy');
                showEmailPopup();
            } catch (err) {
                console.error('Fallback copy failed: ', err);
            }
            
            document.body.removeChild(textArea);
        }

        // Show email copy popup
        function showEmailPopup() {
            const popup = document.getElementById('email-popup');
            const popupLine = document.getElementById('popup-line');
            
            // Reset any existing timeouts
            if (popup.timeoutId) {
                clearTimeout(popup.timeoutId);
            }
            
            // Show popup with fade-in animation
            popup.style.display = 'block';
            
            // Trigger animation after a brief delay to ensure display is set
            setTimeout(() => {
                popup.style.opacity = '1';
                popup.style.transform = 'translateY(0)';
                
                // Start rolling line animation down as text appears
                setTimeout(() => {
                    popupLine.style.transform = 'scaleY(1)';
                }, 100);
            }, 10);
            
            // Hide popup after 3 seconds
            popup.timeoutId = setTimeout(() => {
                // Start rolling line animation up and fade out popup simultaneously
                popupLine.style.transform = 'scaleY(0)';
                popup.style.opacity = '0';
                popup.style.transform = 'translateY(-10px)';
                
                // Hide completely after fade
                setTimeout(() => {
                    popup.style.display = 'none';
                }, 300);
            }, 3000);
        }
        
        // Mobile functionality
        function initializeSidekickState() {
            const savedState = sessionStorage.getItem('sidekickCollapsed');
            const isMobile = window.innerWidth <= 768;
            
            if (savedState === 'true') {
                const aiSidekick = document.getElementById('ai-sidekick');
                const sidekickText = document.getElementById('sidekick-text');
                const mainContent = document.getElementById('main-content');
                const chatContainer = document.getElementById('chat-container');
                
                if (isMobile) {
                    aiSidekick.classList.remove('mobile-fullscreen');
                    mainContent.classList.remove('mobile-hidden');
                    chatContainer.style.display = 'none';
                    sidekickText.textContent = 'AI';
                } else {
                    chatContainer.style.display = 'none';
                    aiSidekick.style.width = '80px';
                    aiSidekick.style.maxWidth = '80px';
                    sidekickText.textContent = 'AI';
                    mainContent.style.width = '75%';
                    mainContent.style.marginLeft = '12.5%';
                }
                sidekickCollapsed = true;
            } else {
                // Check if mobile and set default collapsed state
                if (isMobile) {
                    const aiSidekick = document.getElementById('ai-sidekick');
                    const chatContainer = document.getElementById('chat-container');
                    const sidekickText = document.getElementById('sidekick-text');
                    const mainContent = document.getElementById('main-content');
                    
                    if (aiSidekick && chatContainer && sidekickText && mainContent) {
                        aiSidekick.classList.remove('mobile-fullscreen');
                        mainContent.classList.remove('mobile-hidden');
                        chatContainer.style.display = 'none';
                        sidekickText.textContent = 'AI';
                        sidekickCollapsed = true;
                        sessionStorage.setItem('sidekickCollapsed', 'true');
                    }
                } else {
                    sidekickCollapsed = false;
                }
            }
        }
        
        // Mobile menu functionality
        document.addEventListener('DOMContentLoaded', function() {
            const mobileMenuBtn = document.getElementById('mobile-menu-btn');
            const mobileMenu = document.getElementById('mobile-menu');
            const hamburgerIcon = document.getElementById('hamburger-icon');
            const xIcon = document.getElementById('x-icon');
            
            if (mobileMenuBtn && mobileMenu) {
                mobileMenuBtn.addEventListener('click', function() {
                    mobileMenu.classList.toggle('hidden');
                    hamburgerIcon.classList.toggle('hidden');
                    xIcon.classList.toggle('hidden');
                });
            }
        });
        
        // Mobile contact dropdown functionality
        function toggleMobileContact() {
            const mobileContactMenu = document.getElementById('mobile-contact-menu');
            const mobileContactLine = document.getElementById('mobile-contact-line');
            
            if (mobileContactMenu) {
                const isVisible = !mobileContactMenu.classList.contains('invisible');
                
                if (isVisible) {
                    // Hide menu
                    mobileContactMenu.classList.add('opacity-0', 'invisible');
                    if (mobileContactLine) {
                        mobileContactLine.style.height = '0';
                    }
                } else {
                    // Show menu
                    mobileContactMenu.classList.remove('opacity-0', 'invisible');
                    if (mobileContactLine) {
                        setTimeout(() => {
                            mobileContactLine.style.height = '100%';
                        }, 100);
                    }
                }
            }
        }
        
        // Handle window resize for mobile/desktop transitions
        window.addEventListener('resize', function() {
            const isMobile = window.innerWidth <= 768;
            const aiSidekick = document.getElementById('ai-sidekick');
            const mainContent = document.getElementById('main-content');
            
            // If switching from mobile to desktop or vice versa, reset sidekick state
            if (aiSidekick && mainContent) {
                if (!isMobile) {
                    // Switching to desktop - ensure mobile classes are removed
                    aiSidekick.classList.remove('mobile-fullscreen');
                    mainContent.classList.remove('mobile-hidden');
                }
            }
        });
    </script>
</body>
</html> 